{
  "info": {
    "_postman_id": "b8c79f6f-2b6a-4b0e-a8f0-0b0caa1e9d90",
    "name": "Personal Investment Management API (MVP)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Institutions - List",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/institutions",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "institutions"
          ],
          "query": []
        }
      }
    },
    {
      "name": "Institutions - Create",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/institutions",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "institutions"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"长沙银行\"\n}"
        }
      }
    },
    {
      "name": "Accounts - List",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/accounts",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "accounts"
          ],
          "query": []
        }
      }
    },
    {
      "name": "Accounts - Create",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/accounts",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "accounts"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"长沙银行-借记卡\",\n  \"institution_id\": 1,\n  \"type\": \"debit\",\n  \"currency\": \"CNY\",\n  \"is_liquid\": true\n}"
        }
      }
    },
    {
      "name": "Accounts - Update is_liquid",
      "request": {
        "method": "PATCH",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/accounts/10",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "accounts",
            "10"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"is_liquid\": true\n}"
        }
      }
    },
    {
      "name": "Snapshots - Batch Upsert",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/snapshots/batch_upsert",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "snapshots",
            "batch_upsert"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"source\": \"import_excel\",\n  \"rows\": [\n    {\n      \"date\": \"2025-01-05\",\n      \"account_id\": 10,\n      \"balance\": 6156.16\n    },\n    {\n      \"date\": \"2025-01-05\",\n      \"account_id\": 11,\n      \"balance\": -4048.06\n    }\n  ]\n}"
        }
      }
    },
    {
      "name": "Snapshots - Get by date",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/snapshots?date=2025-01-05",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "snapshots"
          ],
          "query": [
            {
              "key": "date",
              "value": "2025-01-05"
            }
          ]
        }
      }
    },
    {
      "name": "Products - List",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/products",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "products"
          ],
          "query": []
        }
      }
    },
    {
      "name": "Products - Create",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/products",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "products"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"日日金\",\n  \"institution_id\": 1,\n  \"product_type\": \"money_market\",\n  \"risk_level\": \"R1\",\n  \"term_days\": 0,\n  \"liquidity_rule\": \"open\",\n  \"settle_days\": 0,\n  \"note\": \"随时申赎\"\n}"
        }
      }
    },
    {
      "name": "Valuations - Batch Upsert",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/valuations/batch_upsert",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "valuations",
            "batch_upsert"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"source\": \"import_excel\",\n  \"rows\": [\n    {\n      \"product_id\": 200,\n      \"date\": \"2025-01-05\",\n      \"market_value\": 100059.46\n    },\n    {\n      \"product_id\": 201,\n      \"date\": \"2025-01-05\",\n      \"market_value\": 67747.76\n    }\n  ]\n}"
        }
      }
    },
    {
      "name": "Products - Valuations Range",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/products/200/valuations?from=2024-12-30&to=2025-01-05",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "products",
            "200",
            "valuations"
          ],
          "query": [
            {
              "key": "from",
              "value": "2024-12-30"
            },
            {
              "key": "to",
              "value": "2025-01-05"
            }
          ]
        }
      }
    },
    {
      "name": "Lots - Create",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/lots",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "lots"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"product_id\": 200,\n  \"open_date\": \"2025-01-05\",\n  \"principal\": 100000,\n  \"shares\": null,\n  \"note\": \"第1批\"\n}"
        }
      }
    },
    {
      "name": "Product Lots - List",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/products/200/lots",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "products",
            "200",
            "lots"
          ],
          "query": []
        }
      }
    },
    {
      "name": "Lot - Redeem (holding->redeeming)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/lots/9001/redeem",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "lots",
            "9001",
            "redeem"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"redeem_date\": \"2025-02-02\",\n  \"note\": \"到期赎回\"\n}"
        }
      }
    },
    {
      "name": "Lot - Settle (redeeming->settled)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/lots/9001/settle",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "lots",
            "9001",
            "settle"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"settle_date\": \"2025-02-03\",\n  \"amount\": 100650.11,\n  \"account_id\": 10,\n  \"note\": \"赎回到账\"\n}"
        }
      }
    },
    {
      "name": "Transactions - Create subscribe",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/transactions",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "transactions"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"date\": \"2025-01-05\",\n  \"category\": \"subscribe\",\n  \"amount\": -100000,\n  \"account_id\": 10,\n  \"product_id\": 200,\n  \"lot_id\": 9001,\n  \"note\": \"申购28D\"\n}"
        }
      }
    },
    {
      "name": "Transactions - List range",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/transactions?from=2025-01-01&to=2025-02-10",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "transactions"
          ],
          "query": [
            {
              "key": "from",
              "value": "2025-01-01"
            },
            {
              "key": "to",
              "value": "2025-02-10"
            }
          ]
        }
      }
    },
    {
      "name": "Product Metrics - 8w",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/products/200/metrics?window=8w",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "products",
            "200",
            "metrics"
          ],
          "query": [
            {
              "key": "window",
              "value": "8w"
            }
          ]
        }
      }
    },
    {
      "name": "Product XIRR - as_of",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/products/200/xirr?as_of=2025-01-05",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "products",
            "200",
            "xirr"
          ],
          "query": [
            {
              "key": "as_of",
              "value": "2025-01-05"
            }
          ]
        }
      }
    },
    {
      "name": "Cash Today",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/cash/today?date=2025-01-05",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "cash",
            "today"
          ],
          "query": [
            {
              "key": "date",
              "value": "2025-01-05"
            }
          ]
        }
      }
    },
    {
      "name": "Cash Forecast 90d",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/cash/forecast?from=2025-01-05&days=90",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "cash",
            "forecast"
          ],
          "query": [
            {
              "key": "from",
              "value": "2025-01-05"
            },
            {
              "key": "days",
              "value": "90"
            }
          ]
        }
      }
    },
    {
      "name": "Reconciliation Warnings",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/reconciliation/warnings?from=2025-01-01&to=2025-01-31",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "reconciliation",
            "warnings"
          ],
          "query": [
            {
              "key": "from",
              "value": "2025-01-01"
            },
            {
              "key": "to",
              "value": "2025-01-31"
            }
          ]
        }
      }
    },
    {
      "name": "Settings - Get",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/settings",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "settings"
          ],
          "query": []
        }
      }
    },
    {
      "name": "Settings - Patch",
      "request": {
        "method": "PATCH",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/settings",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "settings"
          ],
          "query": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"reserve_amount\": 20000,\n  \"repayment_days\": 7,\n  \"repayment_amount\": 0\n}"
        }
      }
    }
  ]
}