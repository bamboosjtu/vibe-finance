# Sprint 5：资金预测 & 时间维度资产视图（v2.2 对齐版）

> 需求基线：`需求文档 v2.2 · Lot 内部化 + 参考收益版`  
> 前置 Sprint：Sprint 4（赎回在途 & 现金可用性）  
> 设计原则：**预测是辅助而非承诺 · 时间语义清晰 · 不做精度幻觉**

---

## 一、Sprint 5 的角色定位

### 🎯 Sprint Goal（冻结）
> 在**不引入 Lot / 批次模型、不构建复杂预测模型**的前提下，  
> 从“时间”的角度回答一个核心问题：  
> **未来一段时间内，我的资产流动性结构可能会如何变化？**

本 Sprint 的重点不是“预测收益”，而是：
- 未来现金**什么时候可能变得可用**
- 哪些资产在时间上是“被锁定的”

---

## 二、Sprint 5 的明确边界（防止过度承诺）

### 本 Sprint **不做**
- 收益预测、收益率预测
- 基于市场走势的情景模拟
- Lot / InternalHolding
- 精确到日的现金流承诺

### 本 Sprint **必须做到**
- 明确区分：事实、规则推算、用户预期
- 所有预测结果明确标注：**预计 / 可能 / 基于规则**

---

## 三、核心概念（冻结）

### 3.1 三类时间语义（统一口径）

| 类型 | 含义 | 确定性 |
|---|---|---|
| 已发生 | Snapshot / 已到账 | 高 |
| 已确定规则 | 赎回 T+N / 到期日 | 中 |
| 未知未来 | 市场变化 | 低 |

Sprint 5 **只处理前两类**。

---

### 3.2 资金预测的定义（限定）

> **资金预测 = 基于已知规则，对“可能到账时间”的汇总展示**  
> 而不是对金额增减或收益的预测。

---

## 四、功能拆解（按实现顺序）

## S5-1 时间轴资产视图（核心能力）【必做】

### 能力说明
- 按时间维度展示：
  - 当前可用现金
  - 赎回在途资金
  - 已知到期资金

### 展示形式（推荐）
- 横向时间轴（Today / +7d / +30d / +90d）
- 或纵向列表按日期分组

### 验收
- 用户能直观看出：
  - 哪些钱“现在不能用”
  - 哪些钱“可能在未来某天变成可用”

---

## S5-2 未来现金区间汇总【必做】

### 区间定义（可配置）
- 未来 7 天
- 未来 30 天
- 未来 90 天

### 汇总规则（冻结）
- 仅统计：
  - 赎回在途 → 预计到账
  - 明确到期产品
- 不包含：
  - 可能发生的收益
  - 尚未发生的操作

### 展示
- 区间内“预计可用现金总额”
- 标注来源：赎回 / 到期

---

## S5-3 产品层面的时间提示（补充）【可选】

### 能力
在产品详情页补充：
- 最近一次可能变现时间
- 当前是否处于“锁定期”

### 验收
- 只读提示
- 不引导频繁操作

---

## 五、页面与交互

### 5.1 Dashboard（时间视角增强）
新增模块：
- **未来现金概览**
  - 7 / 30 / 90 天预计可用金额
- **资金时间轴入口**

### 5.2 独立页面（可选）
- `资金时间视图`
  - 专注回答“钱什么时候可能可用”

---

## 六、常见边界场景（验收用例）

1. **只有在途赎回，无到期产品**
   - 时间轴只显示赎回预计到账
   - 不显示任何收益预测

2. **多个产品到期日集中**
   - 汇总金额正确
   - 不暗示必然到账（明确“预计”）

3. **无任何未来可用资金**
   - 明确显示“暂无已知可预测到账”
   - 不留空白页

---

## 七、Sprint 5 完成定义（DoD）

当我可以：
- 从时间维度理解资产流动性
- 不被“预测收益”误导
- 对未来现金有**心理预期而非错觉确定性**

则认为 Sprint 5 成功。

---

## 八、与后续 Sprint 的关系

- Sprint 6：导入 & 对账（历史完整性）
- Sprint 7+：高级分析（如有明确需求，再考虑 Lot / 精细收益）
