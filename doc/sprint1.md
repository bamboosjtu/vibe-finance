# Sprint 1 å®ç°æ¸…å•

**ä¸»é¢˜ï¼šè´¦æˆ· & äº§å“ç®¡ç†ï¼ˆå‰åç«¯å¹¶è¡Œï¼‰**
**ç›®æ ‡**ï¼šæŠŠç°å®ä¸–ç•Œçš„è´¦æˆ·å’Œç†è´¢äº§å“ï¼Œ**æ— æŸã€æ— æ­§ä¹‰åœ°å»ºè¿›ç³»ç»Ÿ**

---

## ğŸ“¦ API å“åº”æ ¼å¼çº¦å®š

æœ¬é¡¹ç›®æ‰€æœ‰ API å“åº”å‡é‡‡ç”¨ç»Ÿä¸€çš„ **Envelopeï¼ˆåŒ…è£¹å±‚ï¼‰** æ ¼å¼ï¼š

```json
{
  "code": 200,
  "data": { ... },
  "message": "ok"
}
```

### åç«¯å®ç°

**æ–‡ä»¶**: `backend/utils/response.py`

```python
def ok(data: Any = None, message: str = "ok", code: int = 200):
    return {
        "code": code,
        "data": _serialize(data),
        "message": message,
    }

def err(message: str, code: int = 400, data: Optional[Any] = None):
    return {
        "code": code,
        "data": _serialize(data),
        "message": message,
    }
```

### å‰ç«¯å°è£…

**æ–‡ä»¶**: `frontend/src/services/api.ts`

```typescript
export interface ApiEnvelope<T> {
  code: number;
  data: T;
  message: string;
}

// è‡ªåŠ¨è§£åŒ…ï¼Œè¿”å› data éƒ¨åˆ†
const resp = await apiGet<Account>("/api/accounts/1");
// resp ç±»å‹ä¸º Accountï¼Œè€Œé ApiEnvelope<Account>
```

### æœ¬æ–‡æ¡£ç¤ºä¾‹è¯´æ˜

æœ¬æ–‡æ¡£ä¸­çš„ **å“åº”** ç¤ºä¾‹å±•ç¤ºçš„æ˜¯ `data` å­—æ®µçš„å†…å®¹ï¼ˆå³è£¸å“åº”ï¼‰ï¼Œå®é™… HTTP å“åº”ä¼šè¢«åŒ…è£¹åœ¨ Envelope ä¸­ã€‚

**ç¤ºä¾‹å¯¹æ¯”**:

æ–‡æ¡£ç¤ºä¾‹ï¼ˆå±•ç¤º data å†…å®¹ï¼‰:

```json
{ "id": 1, "name": "é•¿æ²™é“¶è¡Œ" }
```

å®é™… HTTP å“åº”:

```json
{
  "code": 200,
  "data": { "id": 1, "name": "é•¿æ²™é“¶è¡Œ" },
  "message": "ok"
}
```

---

## ğŸ¯ Sprint 1 Goalï¼ˆåŠ¡å¿…å†™åœ¨çœ‹æ¿é¡¶éƒ¨ï¼‰

> æˆ‘å¯ä»¥åƒçœŸå®ç”¨æˆ·ä¸€æ ·ï¼ŒæŠŠæˆ‘ç°åœ¨ç”¨çš„
> **é“¶è¡Œå¡ / ç°é‡‘ / ä¿¡ç”¨å¡ / ç†è´¢äº§å“**
> å…¨éƒ¨å½•å…¥ç³»ç»Ÿï¼Œå¹¶ä¸”å­—æ®µâ€œé¡ºæ‰‹ã€ä¸åˆ«æ‰­â€ã€‚
> æœ¬é˜¶æ®µä¸ç»´æŠ¤ Lot / InternalHoldingï¼ˆä¸å»ºè¡¨ã€ä¸ç”Ÿæˆã€ä¸åˆ†é…ï¼‰ï¼›æœªæ¥å¦‚éœ€ç²¾ç»†åˆ†æï¼Œå¯åŸºäº Transaction å›æ”¾é‡å»ºã€‚

---

# T1-1 Institutionï¼ˆé“¶è¡Œ/å¹³å°ï¼‰ç®¡ç†

## ä»»åŠ¡

å»ºç«‹ä¸€ä¸ªå¯å¤ç”¨çš„ã€Œæœºæ„å­—å…¸ã€ï¼Œä¾›è´¦æˆ·å’Œäº§å“é€‰æ‹©ã€‚

---

### æ¥å£

#### POST /api/institutions

**è¯·æ±‚**

```json
{ "name": "é•¿æ²™é“¶è¡Œ" }
```

**å“åº”**

```json
{ "id": 1, "name": "é•¿æ²™é“¶è¡Œ" }
```

#### GET /api/institutions

**å“åº”**

```json
{
  "items": [
    { "id": 1, "name": "é•¿æ²™é“¶è¡Œ" },
    { "id": 2, "name": "æ”¯ä»˜å®" }
  ]
}
```

**å®ç°è¦ç‚¹**

- name å”¯ä¸€

---

### é¡µé¢

**ä½ç½®**ï¼š

- ä¸å•ç‹¬åšé¡µé¢
- åœ¨ã€Œè´¦æˆ·/äº§å“æ–°å»ºè¡¨å•ã€ä¸­ä»¥å†…è”æ–¹å¼å‡ºç°

**äº¤äº’**

- ä¸‹æ‹‰é€‰æ‹©å·²æœ‰æœºæ„
- æ”¯æŒã€Œæ–°å»ºå¹¶ç«‹å³é€‰ä¸­ã€
- is_liquidï¼šè‹¥â€œæœªå‹¾é€‰/æœªè§¦è¾¾â€è§†ä¸º false **ã€ä¿®æ”¹ã€‘è¯´æ˜ï¼šis_liquid ä»…ä»£è¡¨â€œæ˜¯å¦è®¡å…¥æµåŠ¨èµ„äº§ï¼ˆåŸºç¡€ç‰ˆï¼‰â€ï¼Œä¸ç­‰åŒä¸¥æ ¼â€œå¯ç”¨ç°é‡‘â€ã€‚**

---

### éªŒæ”¶æ ‡å‡†ï¼ˆAcceptance Criteriaï¼‰

- [x] èƒ½å¿«é€Ÿæ–°å¢æœºæ„ï¼ˆä¸è·³é¡µï¼‰
- [x] åŒåæœºæ„ä¸èƒ½é‡å¤åˆ›å»º
- [x] åˆ›å»ºåå¯ç«‹å³ç”¨äºè´¦æˆ·/äº§å“

---

# T1-2 Accountï¼ˆè´¦æˆ·ï¼‰ç®¡ç†

## ä»»åŠ¡

å»ºç«‹è´¦æˆ·æ¨¡å‹ï¼Œå‡†ç¡®è¡¨è¾¾**é’±åœ¨å“ªé‡Œ & èƒ½ä¸èƒ½ç”¨**ã€‚

---

### æ¥å£

#### POST /api/accounts

**è¯·æ±‚**

```json
{
  "name": "é•¿æ²™é“¶è¡Œ-å€Ÿè®°å¡",
  "institution_id": 1,
  "type": "debit",
  "is_liquid": true
}
```

- å‰ç«¯è§„åˆ™ï¼ˆå¼ºçº¦æŸï¼‰ï¼šå‰ç«¯æäº¤ POST /api/accounts æ—¶å¿…é¡»ä¼  is_liquid: booleanï¼Œæœªå‹¾é€‰å°±ä¼  falseã€‚
- åç«¯è§„åˆ™ï¼ˆå…œåº•å…¼å®¹å…¶å®ƒè°ƒç”¨æ–¹ï¼‰ï¼šåç«¯æŠŠ is_liquid å½“æˆ optionalï¼š
  - è‹¥è¯·æ±‚é‡Œ is_liquid ä¸º null / ç¼ºå¤±ï¼šæŒ‰ type è®¡ç®—é»˜è®¤å€¼ï¼ˆtype == credit => falseï¼Œå¦åˆ™ trueï¼‰ã€‚
  - è‹¥è¯·æ±‚é‡Œ is_liquid ä¸º true/falseï¼šç›´æ¥ä½¿ç”¨ï¼Œä¸æ”¹å†™ã€‚

---

#### GET /api/accounts

**å“åº”**

```json
{
  "items": [
    {
      "id": 10,
      "name": "é•¿æ²™é“¶è¡Œ-å€Ÿè®°å¡",
      "type": "debit",
      "is_liquid": true
    },
    {
      "id": 11,
      "name": "èŠ±å‘—",
      "type": "credit",
      "is_liquid": false
    }
  ]
}
```

---

#### PATCH /api/accounts/{id}

**è¯·æ±‚**

```json
{ "is_liquid": true }
```

---

### é¡µé¢

#### è´¦æˆ·åˆ—è¡¨é¡µ

**å±•ç¤ºåˆ—**

- è´¦æˆ·å
- ç±»å‹ï¼ˆç°é‡‘ / é“¶è¡Œå¡ / ä¿¡ç”¨å¡ / æŠ•èµ„è´¦æˆ·ï¼‰
- æ˜¯å¦è®¡å…¥æµåŠ¨èµ„äº§ï¼ˆåŸºç¡€ç‰ˆï¼‰ï¼ˆâœ“ / Ã—ï¼‰ **ã€ä¿®æ”¹ã€‘åŸâ€œå¯ç”¨ç°é‡‘â€æ”¹ä¸ºâ€œæµåŠ¨èµ„äº§ï¼ˆåŸºç¡€ç‰ˆï¼‰â€ï¼Œä¸¥æ ¼å¯ç”¨ç°é‡‘åœ¨åç»­ Sprint åšã€‚**

**æ“ä½œ**

- æ–°å»ºè´¦æˆ·
- ç¼–è¾‘è´¦æˆ·ï¼ˆå¼¹çª—å³å¯ï¼‰

---

#### æ–°å»º / ç¼–è¾‘è´¦æˆ·è¡¨å•

**å­—æ®µ**

- åç§°ï¼ˆå¿…å¡«ï¼‰
- æœºæ„ï¼ˆä¸‹æ‹‰ + æ–°å»ºï¼‰
- ç±»å‹ï¼ˆæšä¸¾ï¼‰
- æ˜¯å¦è®¡å…¥æµåŠ¨èµ„äº§ï¼ˆcheckboxï¼‰

**äº¤äº’çº¦æŸ**

- é€‰æ‹©ã€Œä¿¡ç”¨å¡ã€æ—¶ï¼Œis_liquid è‡ªåŠ¨å–æ¶ˆå‹¾é€‰ï¼ˆå¯æ‰‹åŠ¨æ”¹ï¼‰

---

### éªŒæ”¶æ ‡å‡†

- [x] èƒ½å®Œæ•´å»ºæ¨¡ï¼šç°é‡‘ / å€Ÿè®°å¡ / ä¿¡ç”¨å¡ / æŠ•èµ„è´¦æˆ·
- [x] ä¿¡ç”¨å¡é»˜è®¤ä¸è®¡å…¥æµåŠ¨èµ„äº§ï¼ˆåŸºç¡€ç‰ˆï¼‰ **ã€ä¿®æ”¹ã€‘å£å¾„å¯¹é½ï¼šis_liquid åªç”¨äºâ€œæµåŠ¨èµ„äº§ï¼ˆåŸºç¡€ç‰ˆï¼‰â€ã€‚**
- [x] ä¿®æ”¹ is_liquid åï¼Œåç»­è®¡ç®—ä¼šç”¨åˆ°ï¼ˆSprint 2 éªŒè¯ï¼‰
- [x] å¡«å†™è¿‡ç¨‹æ— â€œæˆ‘ä¸çŸ¥é“è¯¥å¡«ä»€ä¹ˆâ€çš„æ—¶åˆ»ï¼ˆä¸»è§‚ä½†é‡è¦ï¼‰

---

# T1-3 Productï¼ˆç†è´¢äº§å“ï¼‰ç®¡ç†

## ä»»åŠ¡

å»ºç«‹ç†è´¢äº§å“ä¸»æ•°æ®ï¼Œä¸ºåç»­ä¼°å€¼ã€æ¯”è¾ƒã€é¢„æµ‹æ‰“åŸºç¡€ã€‚

---

### æ¥å£

#### POST /api/products

**è¯·æ±‚**

```json
{
  "name": "28D",
  "institution_id": 1,
  "product_type": "bank_wmp",
  "risk_level": "R2",
  "term_days": 28,
  "liquidity_rule": "closed",
  "settle_days": 1,
  "note": "åˆ°æœŸèµå›"
}
```

---

#### GET /api/products

**å“åº”**

```json
{
  "items": [
    {
      "id": 200,
      "name": "28D",
      "risk_level": "R2",
      "term_days": 28,
      "liquidity_rule": "closed"
    }
  ]
}
```

---

### é¡µé¢

#### äº§å“åˆ—è¡¨é¡µ

**å±•ç¤ºåˆ—**

- äº§å“å
- æœºæ„
- é£é™©ç­‰çº§ï¼ˆR1â€“R5ï¼‰
- æœŸé™
- èµå›è§„åˆ™ï¼ˆå¼€æ”¾ / å°é—­ / å®šå¼€ï¼‰

---

#### æ–°å»º / ç¼–è¾‘äº§å“è¡¨å•

**å­—æ®µ**

- äº§å“åï¼ˆå¿…å¡«ï¼‰
- æœºæ„
- é£é™©ç­‰çº§ï¼ˆä¸‹æ‹‰ï¼šR1â€“R5ï¼‰
- æœŸé™å¤©æ•°ï¼ˆnumberï¼Œå¯ä¸ºç©ºï¼‰
- æµåŠ¨æ€§è§„åˆ™ï¼ˆæšä¸¾ï¼‰
- èµå›åˆ°è´¦ T+N
- å¤‡æ³¨

**äº¤äº’è®¾è®¡**

- â€œæ—¥æ—¥é‡‘â€ç±»äº§å“ï¼š
  - æœŸé™å…è®¸ä¸º 0
  - æµåŠ¨æ€§é»˜è®¤ open

- ä¸å¼ºåˆ¶ä½ ä¸€æ¬¡å¡«å…¨ï¼ˆMVP å‹å¥½ï¼‰

---

### éªŒæ”¶æ ‡å‡†

- [x] èƒ½å‡†ç¡®è¡¨è¾¾ 28D / 63D / 91D / æ—¥æ—¥é‡‘
- [x] å­—æ®µä¸é“¶è¡Œ APP é‡Œçš„ä¿¡æ¯ä¸€ä¸€å¯¹åº”
- [x] ä¸éœ€è¦ç†è§£â€œç³»ç»Ÿå†…éƒ¨æ¦‚å¿µâ€å°±èƒ½å¡«

---

# T1-4 å‰åç«¯è”è°ƒ & æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥

## ä»»åŠ¡

ç¡®ä¿å‰ç«¯æ‰€è§å³åç«¯çœŸå®æ•°æ®ï¼Œæ— â€œå‡é¡µé¢â€ã€‚

---

### è”è°ƒæ¸…å•

- [x] æ–°å»ºè´¦æˆ· â†’ åˆ·æ–°åˆ—è¡¨ â†’ æ•°æ®ä¸€è‡´
- [x] ç¼–è¾‘è´¦æˆ· â†’ å†æ¬¡è¿›å…¥ä»æ­£ç¡®
- [x] æ–°å»ºäº§å“ â†’ ç«‹å³å‡ºç°åœ¨åˆ—è¡¨
- [x] åˆ·æ–°é¡µé¢ä¸ä¸¢æ•°æ®

---

## éªŒæ”¶æ ‡å‡†ï¼ˆAcceptance Criteriaï¼‰

- [x] æˆ‘èƒ½æŠŠç°åœ¨æ‰€æœ‰è´¦æˆ·å»ºè¿›å»
- [x] æˆ‘èƒ½æŠŠç°åœ¨æ‰€æœ‰ç†è´¢äº§å“å»ºè¿›å»
- [x] å¡«å†™è¿‡ç¨‹ä¸­æ²¡æœ‰æ˜æ˜¾â€œåäººç±»å­—æ®µâ€
- [x] æˆ‘å¯¹è¿™äº›æ•°æ®â€œä»¥åèƒ½ä¸€ç›´ç”¨â€æœ‰ä¿¡å¿ƒ
- [x] ä¸éœ€è¦æŠŠâ€œç¬¬äºŒæ¬¡ä¹°å…¥â€å½“æˆç¬¬äºŒä¸ªäº§å“æ¥å»ºæ¨¡

---

# ğŸ§  ç»™ä½ çš„ä¸€ä¸ªå…³é”®æé†’ï¼ˆä½œä¸º Tech Leadï¼‰

> **Sprint 1 ä¸è¿½æ±‚â€œå®Œæ•´â€ï¼Œåªè¿½æ±‚â€œçœŸå®â€ã€‚**

å¦‚æœä½ åœ¨è¿™ä¸ª Sprint é‡Œå‘ç°ï¼š

- æŸå­—æ®µéœ€è¦æ”¹å
- æŸå­—æ®µéœ€è¦æ‹†åˆ† / åˆå¹¶
- æŸé»˜è®¤å€¼ä¸åˆç†

ğŸ‘‰ **ç°åœ¨æ”¹ï¼Œæˆæœ¬æœ€ä½ã€‚**
