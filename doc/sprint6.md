# Sprint 6ï¼šå¯¹è´¦ï¼ˆv3 å¯¹é½ç‰ˆï½œä¸å«å¯¼å…¥ï¼‰

> éœ€æ±‚åŸºçº¿ï¼š`éœ€æ±‚æ–‡æ¡£ v3 Â· Lot å†…éƒ¨åŒ– + å‚è€ƒæ”¶ç›Šç‰ˆ`  
> å‰ç½® Sprintï¼šSprint 3ï¼ˆäº§å“è¯¦æƒ…é¡µ & èµ°åŠ¿ï¼‰ã€Sprint 4ï¼ˆèµå›åœ¨é€” & å¯ç”¨ç°é‡‘ï¼‰ã€Sprint 5ï¼ˆæ—¶é—´è§†å›¾ï¼‰  
> æœ¬ Sprint ç‰¹æ®Šçº¦æŸï¼š**ä¸åšå¯¼å…¥**ï¼ˆä¸åš Excel/CSV/é“¶è¡Œæµæ°´è‡ªåŠ¨å¯¼å…¥ï¼‰

---

## ğŸ¯ Sprint Goalï¼ˆå†»ç»“ï¼‰

> **çœ‹è§ä¸ä¸€è‡´**  
> è®©ç³»ç»ŸæŠŠâ€œç°å®è®°å½•ä¸å®Œæ•´/å£å¾„ä¸ä¸€è‡´â€æ˜¾æ€§åŒ–ã€å¯è§£é‡ŠåŒ–ï¼š  
> - ä¸ä¿®æ­£ Snapshotï¼ˆæœ€é«˜æƒå¨ï¼‰  
> - ä¸ä¼ªé€ ä¼°å€¼äº‹å®  
> - åªåšæç¤ºä¸å®šä½ï¼Œå¸®åŠ©ä½ å¿«é€Ÿè¡¥å½•/çº é”™

---

## ä¸€ã€èŒƒå›´ä¸è¾¹ç•Œï¼ˆé˜²æ­¢è¶Šç•Œï¼‰

### æœ¬ Sprint **ä¸åš**
- ä»»ä½•æ•°æ®å¯¼å…¥ï¼ˆExcel/CSV/é“¶è¡Œæµæ°´/æ¥å£ï¼‰
- è‡ªåŠ¨æ›´æ­£ Snapshotã€Transactionã€ProductValuation
- ç²¾ç¡®æ”¶ç›Šæ‹†åˆ†æˆ–å®¡è®¡çº§å¯¹è´¦
- Lot / InternalHoldingï¼ˆä¸ç”Ÿæˆã€ä¸åˆ†é…ã€ä¸å»ºè¡¨ï¼‰

### æœ¬ Sprint **å¿…é¡»åšåˆ°**
- ç»™å‡ºâ€œå¯¹è´¦å·®å¼‚â€çš„**å¯è§å…¥å£**ï¼ˆDashboard + å¯¹è´¦é¡µï¼‰
- å·®å¼‚èƒ½è¢«è§£é‡Šä¸ºï¼š
  - æ•°æ®ç¼ºå¤±ï¼ˆæœªå½•äº¤æ˜“/æœªå½•å¿«ç…§/æœªå½•ä¼°å€¼ï¼‰
  - å£å¾„å·®å¼‚ï¼ˆåœ¨é€”ã€T+Nã€è´¦æˆ·å£å¾„ä¸åŒï¼‰
  - å½•å…¥é”™è¯¯ï¼ˆé‡‘é¢/æ—¥æœŸ/è´¦æˆ·é€‰é”™ï¼‰
- æç¤ºæ˜¯**æç¤ºå‹**ï¼Œä¸é˜»æ–­æ“ä½œ

---

## äºŒã€å¯¹è´¦å£å¾„ï¼ˆå†»ç»“ï¼‰

### 2.1 æƒå¨æ€§
- **Snapshot æ˜¯æœ€é«˜æƒå¨**ï¼šç³»ç»Ÿä¸ä¿®æ­£ Snapshot
- Transaction / Valuation ä»…ç”¨äºæ¨å¯¼ä¸æç¤º

### 2.2 å¯¹è´¦å¯¹è±¡ï¼ˆæœ¬ Sprint åªåšä¸¤ç±»ï¼‰
1. **è´¦æˆ·å¯¹è´¦ï¼ˆAccount Reconciliationï¼‰**
   - Snapshotï¼ˆæŸæ—¥è´¦æˆ·ä½™é¢ï¼‰
   - vs æ¨å¯¼ä½™é¢ï¼ˆåŸºäº Transaction çš„ç°é‡‘æµç´¯è®¡ï¼‰

2. **äº§å“å¯¹è´¦ï¼ˆProduct Activity Reconciliationï¼‰**
   - äº§å“ä¼°å€¼ç¼ºå£ï¼ˆmanual ä¼°å€¼ç‚¹ä¸è¶³ / æ–­æ¡£ï¼‰
   - èµå›åœ¨é€”ä¸€è‡´æ€§ï¼ˆredeem_request ä¸ redeem_settle çš„å·®åˆ†ï¼‰

> æ³¨ï¼šä¸åšâ€œäº§å“å‡€å€¼å®¡è®¡å¼å¯¹è´¦â€ï¼Œä»…åšâ€œæ´»åŠ¨ä¸è®°å½•å®Œæ•´æ€§å¯¹è´¦â€ã€‚

---

## ä¸‰ã€åŠŸèƒ½æ‹†è§£ï¼ˆæŒ‰å®ç°é¡ºåºï¼‰

## S6-1 å¯¹è´¦ä¸­å¿ƒé¡µé¢ï¼ˆReconciliation Centerï¼‰ã€å¿…åšã€‘

### é¡µé¢ç›®æ ‡
æŠŠæ‰€æœ‰ Warning èšåˆåˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œå¹¶å¯æŒ‰ï¼šè´¦æˆ·/äº§å“/æ—¶é—´èŒƒå›´ è¿‡æ»¤ã€‚

### å±•ç¤ºå­—æ®µï¼ˆæœ€å°é›†ï¼‰
- çº§åˆ«ï¼šinfo / warnï¼ˆä¸åš errorï¼‰
- ç±»å‹ï¼š
  - Snapshot vs æ¨å¯¼ä½™é¢å·®å¼‚
  - èµå›åœ¨é€”å¼‚å¸¸ï¼ˆè´Ÿæ•°/è¶…é¢/é•¿æœŸæœªç»“ï¼‰
  - ä¼°å€¼æ–­æ¡£ï¼ˆè¶…è¿‡é˜ˆå€¼å¤©æ•°æœªå½•ï¼‰
- å¯¹è±¡ï¼šaccount_id / product_id
- æ—¥æœŸï¼šå¯¹è´¦åŸºå‡†æ—¥ï¼ˆæˆ–åŒºé—´ï¼‰
- å·®å¼‚æ•°å€¼ï¼ˆå¦‚æœ‰ï¼‰
- å»ºè®®åŠ¨ä½œï¼ˆè¡¥å½•/æ ¸å¯¹/å¿½ç•¥ï¼‰

### éªŒæ”¶
- ä»»ä½• Warning éƒ½èƒ½ä»è¯¥é¡µè¢«å®šä½ä¸è§£é‡Š
- å¯ä¸€é”®è·³è½¬åˆ°å¯¹åº”ï¼šè´¦æˆ·å¿«ç…§/äº§å“è¯¦æƒ…ï¼ˆå¸¦ç­›é€‰å‚æ•°ï¼‰

---

## S6-2 è´¦æˆ·å¯¹è´¦ï¼šSnapshot vs æ¨å¯¼ä½™é¢ã€å¿…åšã€‘

### è¾“å…¥
- Account Snapshotï¼ˆæŒ‰æ—¥ï¼‰
- Transactionï¼ˆå« transferã€incomeã€expenseã€buyã€redeem_settle ç­‰å½±å“è´¦æˆ·çš„ç°é‡‘æµï¼‰

### æ¨å¯¼ä½™é¢ï¼ˆDerivedï¼Œä¸å›å†™ï¼‰
- ä»¥æŸä¸ªæœŸåˆ Snapshot ä¸ºèµ·ç‚¹ï¼Œç´¯è®¡ settle_date å‘ç”Ÿçš„ç°é‡‘æµ
- è¾“å‡ºï¼šderived_balance(date)

### å·®å¼‚è§„åˆ™ï¼ˆå†»ç»“ï¼‰
- diff = snapshot_balance - derived_balance
- è‹¥ |diff| > é˜ˆå€¼ï¼ˆå¯é…ç½®ï¼Œé»˜è®¤ 1 å…ƒæˆ– 10 å…ƒï¼‰â†’ ç”Ÿæˆ Warning
- Warning å¿…é¡»æç¤ºå¯èƒ½åŸå› ï¼š
  - æ¼å½•äº¤æ˜“
  - äº¤æ˜“ settle_date å¡«é”™
  - è´¦æˆ·é€‰é”™
  - Snapshot å½•é”™

### éªŒæ”¶
- è‡³å°‘è¦†ç›–ï¼štransfer / income / expense / buy / redeem_settle çš„å½±å“
- Snapshot æ°¸è¿œä¸è¢«ç³»ç»Ÿæ”¹å†™

---

## S6-3 èµå›åœ¨é€”ä¸€è‡´æ€§æ£€æŸ¥ã€å¿…åšã€‘

### è¾“å…¥
- Transactionï¼šredeem_request / redeem_settle
- Product è§„åˆ™ï¼šT+Nï¼ˆç”¨äºâ€œé•¿æœŸæœªç»“â€æç¤ºï¼‰

### æ£€æŸ¥é¡¹ï¼ˆå†»ç»“ï¼‰
- åœ¨é€”é‡‘é¢ = Î£ redeem_request.amount - Î£ redeem_settle.amountï¼ˆæŒ‰äº§å“ï¼‰
- è‹¥åœ¨é€”é‡‘é¢ < 0 â†’ Warningï¼ˆåˆ°è´¦å¤§äºç”³è¯·ï¼Œé€šå¸¸æ˜¯å½•å…¥é”™ï¼‰
- è‹¥åœ¨é€”é‡‘é¢ > 0 ä¸”è¶…è¿‡ï¼ˆT+N + bufferï¼‰ä»æœªç»“ â†’ Warningï¼ˆå¯èƒ½æ¼è®°åˆ°è´¦æˆ–è§„åˆ™ä¸åŒï¼‰

### éªŒæ”¶
- äº§å“è¯¦æƒ…é¡µå¯æ˜¾ç¤ºï¼šå½“å‰åœ¨é€”é‡‘é¢ + æ˜¯å¦å¼‚å¸¸
- å¯¹è´¦ä¸­å¿ƒå¯è¿½æº¯å¼‚å¸¸åŸå› 

---

## S6-4 ä¼°å€¼æ–­æ¡£æç¤ºï¼ˆæ•°æ®å®Œæ•´æ€§ï¼‰ã€å¿…åšã€‘

### è¾“å…¥
- ProductValuationï¼ˆmanualï¼‰
- ï¼ˆå¯é€‰ï¼‰æœ€è¿‘ä¸€æ¬¡äº¤æ˜“æ—¥æœŸï¼ˆç”¨äºæç¤ºä¼˜å…ˆçº§ï¼‰

### è§„åˆ™ï¼ˆå†»ç»“ï¼‰
- è‹¥è·ç¦»æœ€è¿‘ manual ä¼°å€¼ç‚¹è¶…è¿‡é˜ˆå€¼ï¼ˆé»˜è®¤ 14 å¤©ï¼‰â†’ ç”Ÿæˆæé†’/Warning
- è‹¥æœŸé—´å‘ç”Ÿäº¤æ˜“ï¼ˆbuy/redeem_request/redeem_settleï¼‰â†’ æå‡æç¤ºçº§åˆ«ï¼ˆæ›´éœ€è¦è¡¥å½•ï¼‰

### éªŒæ”¶
- æ–­çº¿æ˜¯ featureï¼šæç¤ºæ–‡æ¡ˆä¸äº¤äº’ä¸€è‡´
- å¯¹è´¦ä¸­å¿ƒå¯è·³è½¬åˆ°äº§å“é¡µâ€œè¡¥å½•ä¼°å€¼â€

---

## S6-5 Warning çš„â€œå¤„ç†â€æœºåˆ¶ï¼ˆä¸åˆ é™¤äº‹å®ï¼‰ã€å¯é€‰ä½†æ¨èã€‘

### èƒ½åŠ›
- å¯¹ Warning åšçŠ¶æ€ç®¡ç†ï¼šopen / acknowledged / muted
- muted éœ€å¡«å†™åŸå› ï¼ˆå¯é€‰ï¼‰

### è§„åˆ™
- muted ä¸å½±å“è®¡ç®—ï¼Œåªå½±å“å±•ç¤º
- ä»»ä½•æ—¶å€™å¯æ¢å¤ open

### éªŒæ”¶
- ä½ å¯ä»¥æŠŠâ€œå·²çŸ¥å·®å¼‚â€ä»åˆ—è¡¨é‡Œæ”¶èµ·æ¥ï¼Œé¿å…å™ªéŸ³

---

## å››ã€é¡µé¢ä¸äº¤äº’è°ƒæ•´

### 4.1 Dashboard å¢å¼º
- å¢åŠ ä¸€ä¸ªè½»é‡å…¥å£ï¼š`å¯¹è´¦æé†’ï¼ˆNï¼‰`
- å±•ç¤º Top 3 Warningï¼ˆå¯ç‚¹å‡»ï¼‰

### 4.2 è·³è½¬é“¾è·¯ï¼ˆå¿…é¡»é¡ºç•…ï¼‰
- å¯¹è´¦ä¸­å¿ƒ â†’ è´¦æˆ·å¿«ç…§é¡µï¼ˆå®šä½åˆ°æ—¥æœŸï¼‰
- å¯¹è´¦ä¸­å¿ƒ â†’ äº§å“è¯¦æƒ…é¡µï¼ˆå®šä½åˆ°ä¼°å€¼/äº¤æ˜“ Tabï¼‰

---

## äº”ã€éªŒæ”¶ç”¨ä¾‹ï¼ˆå¿…é¡»è¦†ç›–ï¼‰

1. **æ¼å½•ä¸€ç¬”è½¬è´¦**
   - è´¦æˆ·å¯¹è´¦ diff > é˜ˆå€¼
   - Warning ç»™å‡ºâ€œå¯èƒ½æ¼å½•äº¤æ˜“â€æç¤º

2. **redeem_settle å½•æˆäº†æ›´å¤§çš„é‡‘é¢**
   - åœ¨é€”é‡‘é¢ < 0
   - Warning æ˜ç¡®æŒ‡å‡ºâ€œåˆ°è´¦é‡‘é¢å¤§äºç”³è¯·â€

3. **ä¸¤å‘¨æœªå½•ä¼°å€¼**
   - äº§å“å‡ºç°ä¼°å€¼æ–­æ¡£æç¤º
   - æ–­çº¿ hover æ–‡æ¡ˆæç¤ºâ€œè¡¥å½•ä¼°å€¼å³å¯è¿çº¿â€

4. **Snapshot ä¸æ¨å¯¼é•¿æœŸä¸ä¸€è‡´**
   - Warning å¯è¢« acknowledged/mutedï¼ˆè‹¥å®ç° S6-5ï¼‰

---

## å®Œæˆå®šä¹‰ï¼ˆDoDï¼‰

å½“ç³»ç»Ÿåšåˆ°ï¼š
- èµ°åŠ¿ä¸­**è§‚å¯Ÿç‚¹ã€æ’å€¼ç‚¹ã€èµ„é‡‘äº‹ä»¶ä¸€çœ¼å¯åˆ†**
- æ”¶ç›Šç‡ä¸ä¼šè¢«å½“ä½œç²¾ç¡®ç»“è®º
- æˆ‘èƒ½åŸºäºå®ƒåšä¸ªäººæŠ•èµ„åˆ¤æ–­

åˆ™è®¤ä¸º Backlog è®¾è®¡æˆåŠŸã€‚

---

## ä¸åç»­ Sprint çš„å…³ç³»

- Sprint 7ï¼šè§„åˆ™å®Œå–„ï¼ˆæ›´ç²¾ç»†çš„è´Ÿå€º/åˆ°æœŸè§„åˆ™ï¼Œæˆ–æ›´å¥½çš„æç¤ºè§£é‡Šï¼‰
- Sprint 8+ï¼šè‹¥æ˜ç¡®éœ€è¦ï¼Œå†è€ƒè™‘å¯¼å…¥ã€Lotã€ç²¾ç¡®æ”¶ç›Šæ¨¡å‹ï¼ˆXIRR/TWRï¼‰
